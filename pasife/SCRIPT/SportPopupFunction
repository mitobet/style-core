<script type="text/javascript">
// SportPopupFunction.js - Sport sayfası için yuvarlak popup fonksiyonu

// Sport sayfası için popup başlatıcı
function initSportPopup(AppState = null) {
  // URL kontrolü - modal=register ve ref=ozibeycasino varsa popup açılmasın
  const urlParams = new URLSearchParams(window.location.search);
  const modal = urlParams.get('modal');
  const ref = urlParams.get('ref');
  
  if (modal === 'register' && ref === 'ozibeycasino') {
    console.log('Modal register and ref ozibeycasino detected, skipping sport popup');
    return;
  }

  // Popup zaten gösterilmişse veya DOM'da varsa çık
  if (document.body.dataset.sportPopupShown === '1' || document.getElementById('sport-popup-overlay')) {
    return;
  }


  // Popup container oluştur
  const popupContainer = document.createElement('div');
  popupContainer.id = 'sport-popup-overlay';
  popupContainer.style.cssText = `
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 99999;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
  `;

  // Dikdörtgen popup içeriği oluştur
  const popup = document.createElement('div');
  popup.style.cssText = `
    position: relative;
    width: 598px;
    height: 629px;
    border-radius: 15px;
    background-color: rgba(0, 0, 0, 0);
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    transform: scale(0.5);
    transition: transform 0.3s ease-in-out;
  `;
  
  // Mobil için responsive ayarlar
  if (window.innerWidth <= 768) {
    popup.style.width = '90vw';
    popup.style.height = 'auto';
    popup.style.maxWidth = '400px';
    popup.style.maxHeight = '420px';
  }

  // Görsel ekle
  const image = document.createElement('img');
  image.src = 'https://vendor-provider.fra1.cdn.digitaloceanspaces.com/ebetlab/GakckagaakasdqGVAEgA/statics/DRvDrKlPl2alG4XHmWt2Ijhr1xw9OALKltvvKyK0.png';
  image.style.cssText = `
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 12px;
    cursor: pointer;
  `;
  
  // Görsel tıklama olayı - Büyük çekiliş survey sayfasına yönlendir
  image.onclick = () => {
    window.open('https://mitobonus.com/survey/mitobet-buyuk-cekilis-e9e4aff7', '_blank');
  };

  // Kapatma (X) butonu oluştur
  const closeButton = document.createElement('button');
  closeButton.innerHTML = '&times;';
  closeButton.style.cssText = `
    position: absolute;
    top: 10px;
    right: 10px;
    width: 35px;
    height: 35px;
    border: none;
    background-color: rgba(0, 0, 0, 0.6);
    color: white;
    font-size: 28px;
    line-height: 1;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color 0.2s;
    z-index: 1;
  `;
  
  // Hover efekti
  closeButton.onmouseenter = () => {
    closeButton.style.backgroundColor = 'rgba(255, 0, 0, 0.8)';
  };
  closeButton.onmouseleave = () => {
    closeButton.style.backgroundColor = 'rgba(0, 0, 0, 0.6)';
  };

  // Popup'ı kapatma fonksiyonu
  const closePopup = () => {
    popupContainer.style.opacity = '0';
    popup.style.transform = 'scale(0.5)';
    setTimeout(() => {
      if (popupContainer.parentNode) {
        popupContainer.parentNode.removeChild(popupContainer);
      }
    }, 300);
    document.body.dataset.sportPopupShown = '1';
  };

  // Kapatma butonuna tıklama
  closeButton.onclick = closePopup;

  // Overlay'e tıklayınca kapat
  popupContainer.onclick = (e) => {
    if (e.target === popupContainer) {
      closePopup();
    }
  };

  // Elementleri birleştir
  popup.appendChild(image);
  popup.appendChild(closeButton);
  popupContainer.appendChild(popup);
  document.body.appendChild(popupContainer);

  // Animasyon için gecikmeli görünüm
  setTimeout(() => {
    popupContainer.style.opacity = '1';
    popup.style.transform = 'scale(1)';
  }, 10);

  // Otomatik kapatma kaldırıldı - sadece manuel kapatma


}
</script>
